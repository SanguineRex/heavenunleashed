########The 10th Crusade
HEA_the_tenth_crusade = {	#Is this a cheat decision or sth? - @Deez
	HEA_arming_faithful = {
		icon = decision_cross
		
		visible = { original_tag = HEA }

		fire_only_once = no

		modifier = { }

		days_remove = 60
		days_re_enable = 30

		cost = 50

		complete_effect = {
			add_manpower = 500
		}

		ai_will_do = {
			base = 0
		}
	}
}

# HEA Conversion Decisions - By HappyNTH #
# hea_conversion = {
# 	hea_slow_conversion = { # Converts provinces one by one
# 		target_root_trigger = {
# 			has_completed_focus = hea_nf_forgive_sins
# 		}
# 		visible = {
# 			NOT = { FROM = { is_subject_of = HEA } }
# 			FROM = { exists = yes }
# 			NOT = { is_puppet = yes }
# 		}
# 		target_trigger = {
# 			FROM = {
# 				OR = {
# 					tag = PHA
# 					tag = LON
# 					tag = TOC
# 					# To add extra targets just use tag = TAG here and in the binding decision
# 				}
# 			}
# 		}
# 		targets = { PHA LON TOC }
# 		available = {
# 			NOT = {
# 				FROM = { is_subject_of = HEA }
# 				has_war_with = FROM
# 			}
# 			NOT = {
# 				custom_trigger_tooltip = {
# 					tooltip = hea_not_converted_state_tt
# 					FROM = {
# 						all_owned_state = {
# 							OR = {
# 								is_impassable = yes
# 								has_state_flag = hea_converted
# 							}
# 						}
# 					}
# 				}
# 			}
# 			custom_trigger_tooltip = {
# 				tooltip = ncn_eligible_tt
# 				FROM = {
# 					any_owned_state = {
# 						any_neighbor_state = {
# 							OR = {
# 								has_state_flag = hea_converted
# 								is_owned_and_controlled_by = HEA
# 							}
# 							is_impassable = no
# 						}
# 					}
# 				}
# 			}
# 		}

# 		days_remove = 100
# 		cost = 40
# 		ai_will_do = {
# 			factor = 1
# 			modifier = {
# 				add = 14
# 				has_political_power > 151 # AI will always assign designers/advisors at 150pp, so once they pass this threshold they have filled their advisors
# 			}
# 		}

# 		remove_effect = {
# 			if = {
# 				limit = { has_global_flag = debug_logs }
# 				log = "[GetDateText]: [Root.GetName] hea_slow_conversion (decision) remove entered"
# 			}
# 			FROM = {
# 				random_owned_state = {
# 					limit = {
# 						any_neighbor_state = {
# 							OR = {
# 								has_state_flag = hea_converted
# 								is_owned_and_controlled_by = HEA
# 							}
# 						}
# 						NOT = { has_state_flag = hea_converted }
# 						is_impassable = no
# 					}
# 					set_state_flag = hea_converted
# 					custom_effect_tooltip = hea_converted_state_tt
# 				}
# 				#country_event = { id = }
# 			}
# 			if = {
# 				limit = { has_global_flag = debug_logs }
# 				log = "[GetDateText]: [Root.GetName] hea_slow_conversion (decision) remove exited"
# 			}
# 		}
# 	}

# 	hea_inquisition =  {
# 		target_root_trigger = {
# 			has_completed_focus = hea_nf_vengance
# 		}
# 		visible = {
# 			NOT = { FROM = { is_subject_of = HEA } }
# 			FROM = { exists = yes }
# 			NOT = { is_puppet = yes }
# 		}
# 		target_trigger = {
# 			FROM = {
# 				OR = {
# 					tag = PHA
# 					tag = LON
# 					tag = TOC
# 					# To add extra targets just use tag = TAG here and in the binding decision
# 				}
# 			}
# 		}
# 		targets = { PHA LON TOC }
# 		available = {
# 			NOT = {
# 				FROM = { is_subject_of = HEA }
# 				has_war_with = FROM
# 			}
# 			NOT = {
# 				custom_trigger_tooltip = {
# 					tooltip = hea_not_converted_state_tt
# 					FROM = {
# 						all_owned_state = {
# 							OR = {
# 								is_impassable = yes
# 								has_state_flag = hea_converted
# 							}
# 						}
# 					}
# 				}
# 			}
# 			custom_trigger_tooltip = {
# 				tooltip = ncn_eligible_tt
# 				FROM = {
# 					any_owned_state = {
# 						any_neighbor_state = {
# 							OR = {
# 								has_state_flag = hea_converted
# 								is_owned_and_controlled_by = HEA
# 							}
# 							is_impassable = no
# 						}
# 					}
# 				}
# 			}
# 			has_manpower > 49
# 		}

# 		days_remove = 20
# 		cost = 20

# 		ai_will_do = {
# 			factor = 1
# 			modifier = {
# 				add = 14
# 				has_political_power > 151 # AI will always assign designers/advisors at 150pp, so once they pass this threshold they have filled their advisors
# 			}
# 			modifier = {
# 				factor = 0
# 				has_manpower < 500
# 			}
# 		}

# 		complete_effect = {
# 			add_manpower = -50
# 		}

# 		remove_effect = {
# 			if = {
# 				limit = { has_global_flag = debug_logs }
# 				log = "[GetDateText]: [Root.GetName] hea_inquisition (decision) remove entered"
# 			}
# 			FROM = {
# 				random_owned_state = {
# 					limit = {
# 						any_neighbor_state = {
# 							OR = {
# 								has_state_flag = hea_converted
# 								is_owned_and_controlled_by = HEA
# 							}
# 						}
# 						NOT = { has_state_flag = hea_converted }
# 						is_impassable = no
# 					}
# 					set_state_flag = hea_converted
# 					custom_effect_tooltip = hea_converted_state_tt
# 				}
# 				#country_event = { id = }
# 			}
# 			if = {
# 				limit = { has_global_flag = debug_logs }
# 				log = "[GetDateText]: [Root.GetName] hea_inquisition (decision) remove exited"
# 			}
# 		}
# 	}

# 	hea_bind_to_us = { # Puppets a country when all the provinces are conquered
# 		target_root_trigger = {
# 			OR = {
# 				has_completed_focus = hea_nf_forgive_sins
# 				has_completed_focus = hea_nf_vengance
# 			}
# 		}
# 		visible = {
# 			NOT = { FROM = { is_subject_of = HEA } }
# 			FROM = { exists = yes }
# 			NOT = { is_puppet = yes }
# 		}
# 		target_trigger = {
# 			FROM = {
# 				OR = {
# 					tag = PHA
# 					tag = TOC
# 					tag = LON
# 					# To add extra targets just use tag = TAG here and in the convertion decision
# 				}
# 			}
# 		}
# 		targets = { PHA LON TOC }
# 		available = {
# 			custom_trigger_tooltip = {
# 				tooltip = hea_convert_state_tt
# 				FROM = {
# 					any_owned_state = {
# 						has_state_flag = hea_converted
# 					}
# 				}
# 			}
# 			NOT = {
# 				FROM = { has_war = yes } # To prevent game crashing issues
# 				has_country_flag = binding_someone
# 			}
# 		}
# 		fixed_random_seed = no

# 		days_remove = 50
# 		days_re_enable = 50
# 		cost = 60
# 		#fire_only_once = no

# 		ai_will_do = {
# 			factor = 10
# 			modifier = {
# 				factor = 0
# 				FROM = {
# 					any_owned_state = {
# 						is_impassable = no
# 						NOT = { has_state_flag = hea_converted }
# 					}
# 				}
# 			}
# 		}

# 		complete_effect = {
# 			set_country_flag = binding_someone
# 			custom_effect_tooltip = impassable_states_dont_matter
# 		}

# 		remove_effect = {
# 			if = {
# 				limit = { has_global_flag = debug_logs }
# 				log = "[GetDateText]: [Root.GetName] hea_bind_to_us (decision) remove entered"
# 			}
# 			custom_effect_tooltip = binding_warning_tt
# 			hidden_effect = {
# 				set_temp_variable = { hea_num_converted_owned_states = 0 }
# 				set_temp_variable = { hea_num_impassable_states = 0 }
# 				FROM = {
# 					every_owned_state = {
# 						limit = {
# 							is_owned_by = FROM
# 							has_state_flag = hea_converted
# 							is_impassable = no
# 						}
# 						add_to_temp_variable = { hea_num_converted_owned_states = 1 }
# 					}
# 					every_owned_state = {
# 						limit = {
# 							is_owned_by = FROM
# 							is_impassable = yes
# 						}
# 						add_to_temp_variable = { hea_num_impassable_states = 1 }
# 					}
# 					set_temp_variable = { lower_value = num_owned_states }
# 					subtract_from_temp_variable = { lower_value = hea_num_impassable_states }
# 					divide_temp_variable = { hea_num_converted_owned_states = lower_value?1 }
# 					multiply_temp_variable = { hea_num_converted_owned_states = 100 }
# 					set_temp_variable = { hea_success_chance = random }
# 					multiply_temp_variable = { hea_success_chance = 100 }
# 					if = {
# 						limit = { check_variable = { hea_num_converted_owned_states > hea_success_chance } }
# 						country_event = { id = nf_event_hea.8 }
# 					}
# 					else = {
# 						HEA = { country_event = { id = nf_event_hea.83 } }
# 					}
# 				}
# 				clear_variable = hea_num_impassable_states
# 				clear_variable = hea_num_converted_owned_states
# 				clr_country_flag = binding_someone
# 			}
# 			if = {
# 				limit = { has_global_flag = debug_logs }
# 				log = "[GetDateText]: [Root.GetName] hea_bind_to_us (decision) remove exited"
# 			}
# 		}
# 	}
# }

#####################
##Michael's Crusade##
#####################
hea_michael_crusade_cat = {
	#If you need explaination lmk Rex, I tried to make comments and explain these but not sure if it's clear enough to understand. These codes are way better than the ones I've written before XD - @Deez
	hea_michael_crusade_trees_faithless_dynamic_decision = { #Trees and Faithless crusades
		icon = GFX_decision_border_war
		cost = 30 #PP Cost
		days_remove = 20 #Duration before granting wargoal so AI can prep
		days_re_enable = 30 #In case of some fuckery happen, I put this here so the decision can reappear and player fight again (such as a 2 vs target which split the target but the player want ALL territories)

		#target_root_trigger = { #Put the needed check for ROOT/Heaven's Gate side here - This is like a part of the normal visible = {} check we used before I also disabled these cause I figured out I can just optimize it by putting the check the category itself, check HEA_decision_categories - @Deez
		#
		#}
		targets = { SHO ROS TIM } #Put the targets TAGs here
		#targets_dynamic = yes #This is in the event of these tag split into civil war dynamic tags for whatever reason - Disabled due to it actually found hidden OWB's dynamic tags for civil war (Example: Fusang, Free Folk etc) - @Deez
		target_trigger = { #Put the needed check for the target's - This is like a part of the normal visible = {} check we used before
			ROOT = { #ROOT is Heaven's Gate TAG
				FROM = { #FROM is the tags in targets block
					all_core_land_owned_by_prev_sphere = no #check if Heaven Gate already control the core target states
					NOT = { has_war_with = ROOT } #Check if the target already at war
				}
			}
		}
		target_non_existing = yes #To check if the target is alive or else it won't show up (Default is NO), changed it to YES so even if the targets dies Heaven's Gate can still reclaim the territories
		available = { #Put the needed check for ROOT/Heaven's Gate to actually able to click the decision. The visible check only for showing to the player, this is the real check for player to know which focus needed to be completed to use the decisions
			has_completed_focus = hea_trees_and_faithless
		}

		war_with_target_on_remove = yes #A Warning check so AI can prep, and real human players can see the warning notification
		war_with_target_on_complete = yes #A Warning check so AI can prep, and real human players can see the warning notification, not working for some reason I'll need to talk with OWB's dev - @Deez
		remove_effect = {
			FROM = {
				ROOT = {
					grant_wargoals_on_core_states_of_prev_force_ai_war = yes #Grant wargoal of the target's core to ROOT/Heaven's Gate, thanks OWB for the advanced scripting to allow demand and stuff
				}
			}
		}

		ai_will_do = { #I'm not well verse in AI scripting so just gonna be something basic, at least they will choose the decision instead of ignoring, again idk why anyone would install this mod and play something else, I'm looking at you Beezus - @Deez
			base = 1
		}
	}
	hea_michael_savages_heretics_dynamic_decision = { #Trees and Faithless crusades
		icon = GFX_decision_border_war
		cost = 30 #PP Cost
		days_remove = 20 #Duration before granting wargoal so AI can prep
		days_re_enable = 30 #In case of some fuckery happen, I put this here so the decision can reappear and player fight again (such as a 2 vs target which split the target but the player want ALL territories)

		#target_root_trigger = { #Put the needed check for ROOT/Heaven's Gate side here - This is like a part of the normal visible = {} check we used before - I also disabled these cause I figured out I can just optimize it by putting the check the category itself, check HEA_decision_categories - @Deez
		#
		#}
		targets = { MUR ANO BDT } #Put the targets TAGs here
		#targets_dynamic = yes #This is in the event of these tag split into civil war dynamic tags for whatever reason - Disabled due to it actually found hidden OWB's dynamic tags for civil war (Example: Fusang, Free Folk etc) - @Deez
		target_trigger = { #Put the needed check for the target's - This is like a part of the normal visible = {} check we used before
			ROOT = { #ROOT is Heaven's Gate TAG
				FROM = { #FROM is the tags in targets block
					all_core_land_owned_by_prev_sphere = no #check if Heaven Gate already control the core target states
					NOT = { has_war_with = ROOT } #Check if the target already at war
				}
			}
		}
		target_non_existing = yes #To check if the target is alive or else it won't show up (Default is NO), changed it to YES so even if the targets dies Heaven's Gate can still reclaim the territories
		available = { #Put the needed check for ROOT/Heaven's Gate to actually able to click the decision. The visible check only for showing to the player, this is the real check for player to know which focus needed to be completed to use the decisions
			has_completed_focus = hea_savages_and_heretics
			if = { #Special check for Boners in the case of them potentially joining Heaven's Gate
				limit = {
					FROM = { original_tag = BDT }
				}
				FROM = { 
					OR = {
						has_completed_focus = bdt_hail_to_the_king #Heretics
						has_completed_focus = bdt_road_warriors_of_the_eighty_four #Heretics
						has_completed_focus = bdt_excommunication #Got fucking rejected by HEA lmao - @Deez
					} 
				}
			}
		}
		war_with_target_on_remove = yes #A Warning check so AI can prep, and real human players can see the warning notification, not working for some reason I'll need to talk with OWB's dev - @Deez
		war_with_target_on_complete = yes #A Warning check so AI can prep, and real human players can see the warning notification, not working for some reason I'll need to talk with OWB's dev - @Deez
		remove_effect = {
			FROM = {
				ROOT = {
					grant_wargoals_on_core_states_of_prev_force_ai_war = yes #Grant wargoal of the target's core to ROOT/Heaven's Gate, thanks OWB for the advanced scripting to allow demand and stuff
				}
			}
		}

		ai_will_do = { #I'm not well verse in AI scripting so just gonna be something basic, at least they will choose the decision instead of ignoring, again idk why anyone would install this mod and play something else, I'm looking at you Beezus - @Deez
			base = 1
		}
	}

}
##########################
##Monsters of the Wastes-Vengeance Path##
##########################
hea_monsters_of_the_wastes_cat = {
	##The Dead Are Walking
	hea_monsters_wastes_deads_dynamic_decision = {
		icon = GFX_decision_jap_conquer_china
		cost = 20 #PP Cost
		days_remove = 20 #Duration before finish purging
		days_re_enable = 10 #Just incase some fuckery happen mid purging and needed a repurge
		fire_only_once = yes

		#target_root_trigger = { #Not needed, the check is in the decision category
		#
		#}
		targets = { TLP TOC WHD LUM GLW GLC RES SIN BLO CAF KAM URA } #Ghouls nation or nations with ghoul leaders at start
		#targets_dynamic = yes #OWB do did some weird dynamic tags thing, so can't use this
		target_trigger = { 
			FROM = {
				NOT = {
					any_core_state = { has_state_flag = HEA_purged_state_flag }
				}
			}
		}
		target_non_existing = yes #Need this to actually purge the non-existing nation after being conquered
		available = { 
			ROOT = {
				FROM = { all_core_land_owned_by_prev_sphere = yes }
			}
		}

		remove_effect = {
			add_to_variable = { hea_monsters_ghouls = 1 }
			FROM = {
				every_core_state = {
					set_state_flag = HEA_purged_state_flag
					add_manpower = -5000
				}
			}
		}

		ai_will_do = { #I'm not well verse in AI scripting so just gonna be something basic, at least they will choose the decision instead of ignoring, again idk why anyone would install this mod and play something else, I'm looking at you Beezus - @Deez
			base = 1
		}
	}

	##Horde of Nephilim
	hea_monsters_wastes_nephilim_dynamic_decision = {
		icon = GFX_decision_jap_conquer_china
		cost = 20 #PP Cost
		days_remove = 20 #Duration before finish purging
		days_re_enable = 10 #Just incase some fuckery happen mid purging and needed a repurge
		fire_only_once = yes

		#target_root_trigger = { #Not needed, the check is in the decision category
		#
		#}
		targets = { TRL SLN DED JCT PRO SHA UOA IMO } #Super Mutant nation or nations with super mutant leaders at start
		#targets_dynamic = yes #OWB do did some weird dynamic tags thing, so can't use this
		target_trigger = { 
			FROM = {
				NOT = {
					any_core_state = { has_state_flag = HEA_purged_state_flag }
				}
			}
		}
		target_non_existing = yes #Need this to actually purge the non-existing nation after being conquered
		available = { 
			ROOT = {
				FROM = { all_core_land_owned_by_prev_sphere = yes }
			}
		}

		remove_effect = {
			add_to_variable = { hea_monsters_mutants = 1 }
			FROM = {
				every_core_state = {
					set_state_flag = HEA_purged_state_flag
					add_manpower = -5000
				}
			}
		}

		ai_will_do = { #I'm not well verse in AI scripting so just gonna be something basic, at least they will choose the decision instead of ignoring, again idk why anyone would install this mod and play something else, I'm looking at you Beezus - @Deez
			base = 1
		}
	}

	##Leviathans dwelling in the Coast
	hea_monsters_wastes_leviathans_dynamic_decision = {
		icon = GFX_decision_jap_conquer_china
		cost = 20 #PP Cost
		days_remove = 20 #Duration before finish purging
		days_re_enable = 10 #Just incase some fuckery happen mid purging and needed a repurge
		fire_only_once = yes

		#target_root_trigger = { #Not needed, the check is in the decision category
		#
		#}
		targets = { MLT DIS RRR } #Mirelurk nation or nations with mirelurk leaders at start
		#targets_dynamic = yes #OWB do did some weird dynamic tags thing, so can't use this
		target_trigger = { 
			FROM = {
				NOT = {
					any_core_state = { has_state_flag = HEA_purged_state_flag }
				}
			}
		}
		target_non_existing = yes #Need this to actually purge the non-existing nation after being conquered
		available = { 
			ROOT = {
				FROM = { all_core_land_owned_by_prev_sphere = yes }
			}
		}

		remove_effect = {
			add_to_variable = { hea_monsters_mirelurks = 1 }
			FROM = {
				every_core_state = {
					set_state_flag = HEA_purged_state_flag
					add_manpower = -5000
				}
			}
		}

		ai_will_do = { #I'm not well verse in AI scripting so just gonna be something basic, at least they will choose the decision instead of ignoring, again idk why anyone would install this mod and play something else, I'm looking at you Beezus - @Deez
			base = 1
		}
	}

	##Steel Puppets
	hea_monsters_wastes_steel_dynamic_decision = {
		icon = GFX_decision_jap_conquer_china
		cost = 20 #PP Cost
		days_remove = 20 #Duration before finish purging
		days_re_enable = 10 #Just incase some fuckery happen mid purging and needed a repurge
		fire_only_once = yes

		#target_root_trigger = { #Not needed, the check is in the decision category
		#
		#}
		targets = { TVT MDM TPA BGR RAD ROB WDN TTM TUB ARM TLA PET PSH } #Robot nation or nations with robot leaders at start
		#targets_dynamic = yes #OWB do did some weird dynamic tags thing, so can't use this
		target_trigger = { 
			FROM = {
				NOT = {
					any_core_state = { has_state_flag = HEA_purged_state_flag }
				}
			}
		}
		target_non_existing = yes #Need this to actually purge the non-existing nation after being conquered
		available = { 
			ROOT = {
				FROM = { all_core_land_owned_by_prev_sphere = yes }
			}
		}

		remove_effect = {
			add_to_variable = { hea_monsters_robots = 1 }
			FROM = {
				every_core_state = {
					set_state_flag = HEA_purged_state_flag
					add_manpower = -5000
				}
			}
		}

		ai_will_do = { #I'm not well verse in AI scripting so just gonna be something basic, at least they will choose the decision instead of ignoring, again idk why anyone would install this mod and play something else, I'm looking at you Beezus - @Deez
			base = 1
		}
	}

	##The Red Devils
	hea_monsters_wastes_red_dynamic_decision = {
		icon = GFX_decision_jap_conquer_china
		cost = 20 #PP Cost
		days_remove = 20 #Duration before finish purging
		days_re_enable = 10 #Just incase some fuckery happen mid purging and needed a repurge
		fire_only_once = yes

		#target_root_trigger = { #Not needed, the check is in the decision category
		#
		#}
		targets = { STC LOI } #Communist nation or nations with communist leaders at start
		#targets_dynamic = yes #OWB do did some weird dynamic tags thing, so can't use this
		target_trigger = { 
			FROM = {
				NOT = {
					any_core_state = { has_state_flag = HEA_purged_state_flag }
				}
			}
		}
		target_non_existing = yes #Need this to actually purge the non-existing nation after being conquered
		available = { 
			ROOT = {
				FROM = { all_core_land_owned_by_prev_sphere = yes }
			}
		}

		remove_effect = {
			add_to_variable = { hea_monsters_communists = 1 }
			FROM = {
				every_core_state = {
					set_state_flag = HEA_purged_state_flag
					add_manpower = -5000
				}
			}
		}

		ai_will_do = { #I'm not well verse in AI scripting so just gonna be something basic, at least they will choose the decision instead of ignoring, again idk why anyone would install this mod and play something else, I'm looking at you Beezus - @Deez
			base = 1
		}
	}
}

#########################################
##Theological Assembly-Forgiveness Path##
#########################################
hea_theological_assembly_sharing_cat = {
	
}

###############
##Water Mills##
###############
hea_taming_river_cat = {
	#18-Innocence Lost
	hea_water_mills_18_1 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 18
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			add_to_variable = {	hea_river_resource_water = 15}
			set_country_flag = hea_water_mills_built_18_1
			clr_country_flag = hea_building_water_mills
			custom_effect_tooltip = hea_water_mills_18_1_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 18
			}
		}
	}
	hea_water_mills_18_2 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 18
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_18_1
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			add_to_variable = { hea_river_resource_energy = 8}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_18_1
			set_country_flag = hea_water_mills_built_18_2
			custom_effect_tooltip = hea_water_mills_18_2_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 18
			}
		}
	}
	hea_water_mills_18_3 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 18
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_18_2
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			subtract_from_variable = { hea_river_resource_energy = 3}
			add_to_variable = { hea_river_stability = 0.025}
			add_to_variable = { hea_river_monthly_pop = 0.05}
			add_to_variable = { hea_river_non_core_manpower = 0.05}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_18_2
			custom_effect_tooltip = hea_water_mills_18_3_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 18
			}
		}
	}
	#116-Eastern Passage
	hea_water_mills_116_1 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 116
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			add_to_variable = {	hea_river_resource_water = 15}
			set_country_flag = hea_water_mills_built_116_1
			clr_country_flag = hea_building_water_mills
			custom_effect_tooltip = hea_water_mills_116_1_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 116
			}
		}
	}
	hea_water_mills_116_2 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 116
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_116_1
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			add_to_variable = { hea_river_resource_energy = 8}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_116_1
			set_country_flag = hea_water_mills_built_116_2
			custom_effect_tooltip = hea_water_mills_116_2_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 116
			}
		}
	}
	hea_water_mills_116_3 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 116
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_116_2
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			subtract_from_variable = { hea_river_resource_energy = 3}
			add_to_variable = { hea_river_stability = 0.025}
			add_to_variable = { hea_river_monthly_pop = 0.05}
			add_to_variable = { hea_river_non_core_manpower = 0.05}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_116_2
			custom_effect_tooltip = hea_water_mills_116_3_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 116
			}
		}
	}
	#278-Windy Isolation
	hea_water_mills_278_1 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 278
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			add_to_variable = {	hea_river_resource_water = 15}
			set_country_flag = hea_water_mills_built_278_1
			clr_country_flag = hea_building_water_mills
			custom_effect_tooltip = hea_water_mills_278_1_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 278
			}
		}
	}
	hea_water_mills_278_2 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 278
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_278_1
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			add_to_variable = { hea_river_resource_energy = 8}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_278_1
			set_country_flag = hea_water_mills_built_278_2
			custom_effect_tooltip = hea_water_mills_278_2_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 278
			}
		}
	}
	hea_water_mills_278_3 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 278
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_278_2
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			subtract_from_variable = { hea_river_resource_energy = 3}
			add_to_variable = { hea_river_stability = 0.025}
			add_to_variable = { hea_river_monthly_pop = 0.05}
			add_to_variable = { hea_river_non_core_manpower = 0.05}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_278_2
			custom_effect_tooltip = hea_water_mills_278_3_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 278
			}
		}
	}
	#198-Southern Gate
	hea_water_mills_198_1 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 198
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			add_to_variable = {	hea_river_resource_water = 15}
			set_country_flag = hea_water_mills_built_198_1
			clr_country_flag = hea_building_water_mills
			custom_effect_tooltip = hea_water_mills_198_1_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 198
			}
		}
	}
	hea_water_mills_198_2 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 198
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_198_1
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			add_to_variable = { hea_river_resource_energy = 8}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_198_1
			set_country_flag = hea_water_mills_built_198_2
			custom_effect_tooltip = hea_water_mills_198_2_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 198
			}
		}
	}
	hea_water_mills_198_3 = {
		icon = x
		cost = 30
		fire_only_once = yes

		available = {
			has_full_control_of_state = 198
			num_of_available_civilian_factories > 0
			NOT = {
				has_country_flag = hea_building_water_mills
			}
		}
		visible = {
			has_completed_focus = hea_water_mills
			has_country_flag = hea_water_mills_built_198_2
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_building_water_mills
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			subtract_from_variable = { hea_river_resource_water = 5}
			subtract_from_variable = { hea_river_resource_energy = 3}
			add_to_variable = { hea_river_stability = 0.025}
			add_to_variable = { hea_river_monthly_pop = 0.05}
			add_to_variable = { hea_river_non_core_manpower = 0.05}
			clr_country_flag = hea_building_water_mills
			clr_country_flag = hea_water_mills_built_198_2
			custom_effect_tooltip = hea_water_mills_198_3_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 198
			}
		}
	}
}
######################
##Taming The Heavens##
######################
hea_taming_heaven_cat = {
	#276-Stagleap
	hea_alchemist_276 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 276
			NOT = {
				has_country_flag = hea_capturing_scientists
			}
		}
		visible = {
			has_completed_focus = hea_lost_scientists
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_capturing_scientists
		}
		remove_effect = {
			add_to_variable = { hea_heaven_research = 0.025}
			clr_country_flag = hea_capturing_scientists
			set_country_flag = hea_captured_scientists_276
			custom_effect_tooltip = hea_alchemist_276_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 276
			}
		}
	}
	#30-High Parishes
	hea_alchemist_30 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 30
			NOT = {
				has_country_flag = hea_capturing_scientists
			}
		}
		visible = {
			has_completed_focus = hea_lost_scientists
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_capturing_scientists
		}
		remove_effect = {
			add_to_variable = { hea_heaven_research = 0.025}
			clr_country_flag = hea_capturing_scientists
			set_country_flag = hea_captured_scientists_30
			custom_effect_tooltip = hea_alchemist_30_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 30
			}
		}
	}
	#700-Elk Ridge
	hea_alchemist_700 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 700
			NOT = {
				has_country_flag = hea_capturing_scientists
			}
		}
		visible = {
			has_completed_focus = hea_lost_scientists
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_capturing_scientists
		}
		remove_effect = {
			add_to_variable = { hea_heaven_research = 0.025}
			clr_country_flag = hea_capturing_scientists
			set_country_flag = hea_captured_scientists_700
			custom_effect_tooltip = hea_alchemist_700_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 700
			}
		}
	}
	#949-Strawberry Mountain
	hea_alchemist_949 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 949
			NOT = {
				has_country_flag = hea_capturing_scientists
			}
		}
		visible = {
			has_completed_focus = hea_lost_scientists
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_capturing_scientists
		}
		remove_effect = {
			add_to_variable = { hea_heaven_research = 0.025}
			clr_country_flag = hea_capturing_scientists
			set_country_flag = hea_captured_scientists_949
			custom_effect_tooltip = hea_alchemist_949_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 949
			}
		}
	}	
	#950-Rock Creek
	hea_alchemist_950 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 950
			NOT = {
				has_country_flag = hea_capturing_scientists
			}
		}
		visible = {
			has_completed_focus = hea_lost_scientists
		}

		days_remove = 30
		complete_effect = {
			set_country_flag = hea_capturing_scientists
		}
		remove_effect = {
			add_to_variable = { hea_heaven_research = 0.025}
			clr_country_flag = hea_capturing_scientists
			set_country_flag = hea_captured_scientists_950
			custom_effect_tooltip = hea_alchemist_950_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 950
			}
		}
	}
	#Final-Research facility
	hea_alchemist_final_research = {
		icon = x
		cost = 150
		fire_only_once = yes
		 
		available = {
			has_country_flag = hea_captured_scientists_950
			has_country_flag = hea_captured_scientists_949
			has_country_flag = hea_captured_scientists_30
			has_country_flag = hea_captured_scientists_276
			has_country_flag = hea_captured_scientists_700
			num_of_available_civilian_factories > 3
		}
		visible = {
			has_completed_focus = hea_lost_scientists
			NOT = {
				has_country_flag = hea_alchemist_final
			}
		}

		days_remove = 100
		modifier = {
			civilian_factory_use = 4
		}
		complete_effect = {
			set_country_flag = hea_alchemist_final
		}
		remove_effect = {
			add_to_variable = { hea_heaven_research = 0.075}
			clr_country_flag = hea_captured_scientists_950
			clr_country_flag = hea_captured_scientists_949
			clr_country_flag = hea_captured_scientists_30
			clr_country_flag = hea_captured_scientists_276
			clr_country_flag = hea_captured_scientists_700
			custom_effect_tooltip = hea_alchemist_final_research_tt
		}
		cancel_trigger = {
		}
	}
	hea_alchemist_final_resource = {
		icon = x
		custom_cost_trigger = {
			set_temp_variable = { temp_cap_cost = 300 }
			check_variable = {
				caps_number_display > temp_cap_cost
			}
		}
		custom_cost_text = "caps_decisions_cost_text"
		fire_only_once = yes
		 
		available = {
			has_country_flag = hea_captured_scientists_950
			has_country_flag = hea_captured_scientists_949
			has_country_flag = hea_captured_scientists_30
			has_country_flag = hea_captured_scientists_276
			has_country_flag = hea_captured_scientists_700
			num_of_available_civilian_factories > 3
		}
		visible = {
			has_completed_focus = hea_lost_scientists
			NOT = {
				has_country_flag = hea_alchemist_final
			}
		}

		days_remove = 100
		modifier = {
			civilian_factory_use = 4
		}
		complete_effect = {
			set_country_flag = hea_alchemist_final
			set_temp_variable = { caps_to_add = -300 }
			add_caps = yes
		}
		remove_effect = {
			add_to_variable = { hea_heaven_resource_circuitry = 40}
			add_to_variable = { hea_heaven_resource_advanced = 40}
			clr_country_flag = hea_captured_scientists_950
			clr_country_flag = hea_captured_scientists_949
			clr_country_flag = hea_captured_scientists_30
			clr_country_flag = hea_captured_scientists_276
			clr_country_flag = hea_captured_scientists_700
			custom_effect_tooltip = hea_alchemist_final_resource_tt
		}
		cancel_trigger = {
		}
	}
}
################
##Steam Smiths##
################
hea_taming_land_cat = {
	#1385-Western Tunnel
	hea_smiths_1385_1 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 1385
			NOT = {
				has_country_flag = hea_building_smiths
			}
			num_of_available_civilian_factories > 1
		}
		visible = {
			has_completed_focus = hea_steam_smiths
		}

		days_remove = 30
		modifier = {
			civilian_factory_use = 2
		}
		complete_effect = {
			set_country_flag = hea_building_smiths
		}
		remove_effect = {
			add_to_variable = { hea_land_resource_metal = 20}
			clr_country_flag = hea_building_smiths
			set_country_flag = hea_smiths_built_1385_1
			custom_effect_tooltip = hea_smiths_1385_1_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 1385
			}
		}
	}
	hea_smiths_1385_2 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 1385
			NOT = {
				has_country_flag = hea_building_smiths
			}
			num_of_available_civilian_factories > 1
		}
		visible = {
			has_completed_focus = hea_steam_smiths
			has_country_flag = hea_smiths_built_1385_1
		}

		days_remove = 30
		modifier = {
			civilian_factory_use = 2
		}
		complete_effect = {
			set_country_flag = hea_building_smiths
		}
		remove_effect = {
			subtract_from_variable = { hea_land_resource_metal = 10}
			add_to_variable = { hea_land_resource_composites = 10}
			clr_country_flag = hea_building_smiths
			clr_country_flag = hea_smiths_built_1385_1
			set_country_flag = hea_smiths_built_1385_2
			custom_effect_tooltip = hea_smiths_1385_2_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 1385
			}
		}
	}
	#198-Southern Gate
	hea_smiths_198_1 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 198
			NOT = {
				has_country_flag = hea_building_smiths
			}
			num_of_available_civilian_factories > 1
		}
		visible = {
			has_completed_focus = hea_steam_smiths
		}

		days_remove = 30
		modifier = {
			civilian_factory_use = 2
		}
		complete_effect = {
			set_country_flag = hea_building_smiths
		}
		remove_effect = {
			add_to_variable = { hea_land_resource_metal = 20}
			clr_country_flag = hea_building_smiths
			set_country_flag = hea_smiths_built_198_1
			custom_effect_tooltip = hea_smiths_198_1_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 198
			}
		}
	}
	hea_smiths_198_2 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 198
			NOT = {
				has_country_flag = hea_building_smiths
			}
			num_of_available_civilian_factories > 1
		}
		visible = {
			has_completed_focus = hea_steam_smiths
			has_country_flag = hea_smiths_built_198_1
		}

		days_remove = 30
		modifier = {
			civilian_factory_use = 2
		}
		complete_effect = {
			set_country_flag = hea_building_smiths
		}
		remove_effect = {
			subtract_from_variable = { hea_land_resource_metal = 10}
			add_to_variable = { hea_land_resource_composites = 10}
			clr_country_flag = hea_building_smiths
			clr_country_flag = hea_smiths_built_198_1
			set_country_flag = hea_smiths_built_198_2
			custom_effect_tooltip = hea_smiths_198_2_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 198
			}
		}
	}
	#276-Stagleap
	hea_smiths_276_1 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 276
			NOT = {
				has_country_flag = hea_building_smiths
			}
			num_of_available_civilian_factories > 1
		}
		visible = {
			has_completed_focus = hea_steam_smiths
		}

		days_remove = 30
		modifier = {
			civilian_factory_use = 2
		}
		complete_effect = {
			set_country_flag = hea_building_smiths
		}
		remove_effect = {
			add_to_variable = { hea_land_resource_metal = 20}
			clr_country_flag = hea_building_smiths
			set_country_flag = hea_smiths_built_276_1
			custom_effect_tooltip = hea_smiths_276_1_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 198
			}
		}
	}
	hea_smiths_276_2 = {
		icon = x
		cost = 30
		fire_only_once = yes
		 
		available = {
			has_full_control_of_state = 276
			NOT = {
				has_country_flag = hea_building_smiths
			}
			num_of_available_civilian_factories > 1
		}
		visible = {
			has_completed_focus = hea_steam_smiths
			has_country_flag = hea_smiths_built_276_1
		}

		days_remove = 30
		modifier = {
			civilian_factory_use = 2
		}
		complete_effect = {
			set_country_flag = hea_building_smiths
		}
		remove_effect = {
			subtract_from_variable = { hea_land_resource_metal = 10}
			add_to_variable = { hea_land_resource_composites = 10}
			clr_country_flag = hea_building_smiths
			clr_country_flag = hea_smiths_built_276_1
			set_country_flag = hea_smiths_built_276_2
			custom_effect_tooltip = hea_smiths_276_2_tt
		}
		cancel_trigger = {
			NOT = {
				has_full_control_of_state = 276
			}
		}
	}
	#Final-Steam Smiths
	hea_smiths_final = {
		icon = x
		cost = 75
		fire_only_once = yes

		available = {
			has_country_flag = hea_smiths_built_1385_2
			has_country_flag = hea_smiths_built_198_2
			has_country_flag = hea_smiths_built_276_2
			num_of_available_civilian_factories > 3
		}
		visible = {
			has_completed_focus = hea_steam_smiths
		}

		days_remove = 100
		modifier = {
			civilian_factory_use = 4
		}
		complete_effect = {
			clr_country_flag = hea_smiths_built_1385_2
			clr_country_flag = hea_smiths_built_198_2
			clr_country_flag = hea_smiths_built_276_2
		}
		remove_effect = {
			subtract_from_variable = { hea_land_resource_composites = 15}
			add_to_variable = { hea_land_output = 0.1}
			add_ideas = hea_steam_smiths_weapon
			custom_effect_tooltip = hea_smiths_final_tt
		}
	}
}